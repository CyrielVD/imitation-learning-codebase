<?xml version="1.0"?>
<launch>
    <arg name="random_seed" default="1234"/>
    <param name="random_seed" value="$(arg random_seed)"/>
    <arg name="output_path" default="/tmp"/>
    <param name="output_path" value="$(arg output_path)"/>

    <rosparam command="load" file="$(env HOME)/src/sim/ros/config/general/default.yml" />

    <arg name="world_name" default="debug"/>
    <rosparam command="load" file="$(env HOME)/src/sim/ros/config/world/$(arg world_name).yml" ns="world"/>
    <arg name="graphics" default="false"/>
    <arg name="gazebo" default="false"/>
    <group if="$(arg gazebo)">
        <include file="$(find imitation_learning_ros_package)/launch/gazebo.launch">
            <arg name="world_name" value="$(env HOME)/src/sim/ros/gazebo/worlds/$(arg world_name).world"/>
            <arg name="gui" value="$(arg graphics)"/>
            <arg name="headless" default="true"/>
        </include>
    </group>

    <arg name="robot_name" default="debug"/>
    <rosparam command="load" file="$(env HOME)/src/sim/ros/config/robot/$(arg robot_name).yml" ns="robot"/>

    <arg name="x_pos" default="0"/>
    <arg name="y_pos" default="0"/>
    <arg name="z_pos" default="0.5"/>
    <arg name="y_or" default="1.57"/>

    <arg name="turtlebot_sim" default="false"/>
    <group if="$(arg turtlebot_sim)">
          <param name="robot_description"
                 command="$(find xacro)/xacro --inorder $(env HOME)/src/sim/ros/gazebo/urdf/turtlebot3_burger.urdf.xacro"/>
          <node pkg="gazebo_ros"
                type="spawn_model"
                name="spawn_urdf"
                args="-urdf -model turtlebot3_burger -x $(arg x_pos) -y $(arg y_pos)
                -Y $(arg y_or) -z $(arg z_pos) -param robot_description"
                output="log"/>
    </group>

    <arg name="keyboard" default="false"/>
    <group if="$(arg keyboard)">
        <param name="keyboard_config"
               value="$(env HOME)/src/sim/ros/config/keyboard/$(arg robot_name).yml"/>
        <node pkg="imitation_learning_ros_package"
              name="teleop_twist_keyboard"
              type="teleop_twist_keyboard.py"
              output="screen"/>
    </group>

    <arg name="fsm" default="true"/>
    <group if="$(arg fsm)">
        <arg name="fsm_config" default="debug"/>
        <rosparam command="load" file="$(env HOME)/src/sim/ros/config/fsm/$(arg fsm_config).yml" ns="fsm"/>
        <node pkg="imitation_learning_ros_package"
              name="fsm"
              type="fsm.py"
              output="screen"/>
    </group>

    <arg name="control_mapping" default="true"/>
    <group if="$(arg control_mapping)">
        <arg name="control_mapping_config" default="default"/>
        <rosparam command="load"
                  file="$(env HOME)/src/sim/ros/config/control_mapping/$(arg control_mapping_config).yml"
                  ns="control_mapping"/>
        <node pkg="imitation_learning_ros_package"
              name="control_mapping"
              type="control_mapping.py"
              output="screen"/>
    </group>

    <arg name="ros_expert" default="true"/>
    <group if="$(arg ros_expert)">
        <arg name="expert_config_file_path_with_extension"
             default="src/sim/ros/config/actor/scan_collision_avoidance.yml"/>
        <rosparam command="load"
                  file="$(env HOME)/$(arg expert_config_file_path_with_extension)"
                  ns="/actor/ros_expert/specs"/>
        <node pkg="imitation_learning_ros_package"
              name="ros_expert"
              type="ros_expert.py"
              output="screen"/>
    </group>

</launch>